<!DOCTYPE html>
<html lang="en">

<head>
    <title>新增购买类型</title>
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/jquery.min.js"></script>
    <link rel="stylesheet" href="${base}/mrhweb/css/assets/css/style.css">
    <link rel="stylesheet" href="${base}/mrhweb/css/assets/css/loader-style.css">
    <link rel="stylesheet" href="${base}/mrhweb/css/assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="${base}/mrhweb/css/assets/js/tag/jquery.tagsinput.css">
	<link href="${base}/mrhweb/css/formStyle.css" rel='stylesheet' type='text/css' />
	
    <script src="${base}/mrhweb/css/assets/js/footable/js/footable.js?v=2-0-1" type="text/javascript"></script>
    <script src="${base}/mrhweb/css/assets/js/footable/js/footable.sort.js?v=2-0-1" type="text/javascript"></script>
	<!-- MAIN EFFECT -->
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/preloader.js"></script>
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/app.js"></script>
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/load.js"></script>
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/main.js"></script>
    <script type="text/javascript" src="${base}/mrhweb/css/assets/js/tag/jquery.tagsinput.js"></script>
	
	<link href="${base}/mrhweb/css/assets/js/footable/css/footable.core.css?v=2-0-1" rel="stylesheet" type="text/css">
    <link href="${base}/mrhweb/css/assets/js/footable/css/footable.standalone.css" rel="stylesheet" type="text/css">
    <link href="${base}/mrhweb/css/assets/js/footable/css/footable-demos.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="${base}/mrhweb/css/assets/js/dataTable/lib/jquery.dataTables/css/DT_bootstrap.css">
    <link rel="stylesheet" href="${base}/mrhweb/css/assets/js/dataTable/css/datatables.responsive.css">
	
	
	<script type="text/javascript" src="${base}/mrhweb/js/commonJs/head.js"></script>
	<script type="text/javascript" src="${base}/mrhweb/js/commonJs/centerLoader/js/center-loader.min.js"></script>
	<script src="${base}/mrhweb/js/commonJs/mrh.js"></script>
	<script src="${base}/mrhweb/js/commonJs/imagePreview.js"></script>
	<script type="text/javascript" src="${base}/mrhweb/js/commonJs/dict.js"></script>
	<script type="text/javascript" src="${base}/mrhweb/js/commonJs/pageCount.js"></script>
    <link rel="shortcut icon" href="${base}/mrhweb/css/assets/ico/minus.png">
</head>

<body>
    <!-- Preloader -->
    <div id="preloader">
        <div id="status">&nbsp;</div>
    </div>
    <!-- TOP NAVBAR -->
    <nav role="navigation" class="navbar navbar-static-top">
        <#include "../templateView/navigation.html"/>
    </nav>

    <!-- /END OF TOP NAVBAR -->

    <!-- SIDE MENU -->
    <div id="skin-select">
        <#include "../templateView/skinSelect.html"/>
    </div>
    <!-- END OF SIDE MENU -->



    <!--  PAPER WRAP -->
    <div class="wrap-fluid">
        <div class="container-fluid paper-wrap bevel tlbr">

            <!-- CONTENT -->
            <!--TITLE -->
            <div class="row">
                <div id="paper-top">
                    <div class="col-sm-3">
                        <h2 class="tittle-content-header">
                            <i class="icon-map"></i> 
                            <span>添加购买类型(展示给前端的购买选择)
                            </span>
                        </h2>
                    </div>
                </div>
            </div>
            <!--/ TITLE -->

            <!-- BREADCRUMB -->
            <ul id="breadcrumb">
                <li>
                    <span class="entypo-home"></span>
                </li>
                <li class="pull-right">
                    <div class="input-group input-widget">
                        <input style="border-radius:15px" type="text" placeholder="搜索..." class="form-control">
                    </div>
                </li>
            </ul>

            <!-- END OF BREADCRUMB -->

		 <div class="content-wrap">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="nest" id="validationClose">
                            <div class="title-alt">
                                <h6>列表</h6>
                            </div>
                             <div class="body-nest" id="Filtering" style="margin-top:15px">
                                <div class="row" style="margin-bottom:10px;">
                                    <div class="col-sm-4">
                                        <input class="form-control" id="filter" placeholder="搜索列表..." type="text" onkeypress="if(event.keyCode==13||event.which==13)keywordSearch(this);">
                                    </div>
                                    <div class="col-sm-6">
                                   		<span>每页数</span>
                                        <select class="filter-status form-control" onchange="window._queryOptions.options.page.pageNo=1;window._queryOptions.options.page.length=this.value;window._queryOptions.query();">
                                            <option value="10">10
                                            <option value="20">20
                                            <option value="30">40
                                        </select>
                                        <a href="#clear" style="margin-left:10px;" class="pull-right btn btn-info clear-filter" >备用按钮</a>
                                        <a href="#api" class="pull-right btn btn-info filter-api">全部展开</a>
                                    </div>
                                </div>

                                <table id="footable-res2" class=""  data-page-size="2">
                                    <thead><tr><th data-toggle="true">类型</th>
                                     <th >标题</th><th>侧重排序</th><th>状态</th><th>操作</th></tr>
                                    </thead><tbody></tbody><tfoot>
                                        <tr><td colspan="5">
                                             <div class="pagination pagination-centered">
                                             </div></td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                            
                            <div class="body-nest" id="editValidation"  >
                            <p class="lead well">新增／编辑</p>
                                <div class="form_center">

           <!--            <div class="tab-content">
						<div class="tab-pane active" id="horizontal-form">  --> 
							<form class="form-horizontal" action="${base}/governor/purchT/saveOrUpdate.do" method="post" enctype="multipart/form-data" >  
								<#if purt.id??><input type="hidden" name="id" value="${purt.id}" >  </#if>
								<#if purt.imgPath??><input type="hidden" name="imgPath" value="${purt.imgPath}"></#if>
								<#if purt.allFolder??><input type="hidden" name="allFolder" value="${purt.allFolder}"><#else>
								<input type="hidden" name="allFolder" value="0"></#if>
								<#if purt.allFile??><input type="hidden" name="allFile" value="${purt.allFile}"><#else>
								<input type="hidden" name="allFile" value="0"></#if>
								<div class="form-group">
									<label  class="col-sm-2 control-label">类型：</label>
									<div class="col-sm-8">
										<input type="text" id="textTypeId" name="type" 
										onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
										<#if purt.type??> value="${purt.type}" </#if> class="form-control1" placeholder="仅限数字，且不可重复">
									</div>
								</div>
								<div class="form-group">
									<label  class="col-sm-2 control-label">标题：</label>
									<div class="col-sm-8">
										<input type="text" name="name" <#if purt.name??> value="${purt.name}" </#if> class="form-control1"  placeholder="一般根文件夹全称">
									</div>
								</div>
								<div class="form-group">
									<label  class="col-sm-2 control-label">侧重排序：</label>
									<div class="col-sm-8">
										<input type="text" name="sno" 
										onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')"
										<#if purt.sno??> value="${purt.sno}" </#if>  class="form-control1" placeholder="仅限数字，越大排名越前">
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-2 control-label">状态：</label>
									<div class="col-sm-8" >
										<div class="radio-inline"><label><input type="radio" name="state" value="true"  checked=""> 有效</label></div>
										<div class="radio-inline"><label><input type="radio" name="state" value="false" <#if purt.state??&&purt.state==false>checked=""</#if>> 无效</label></div>
									</div>
								</div>
								<div class="form-group" >
									<label class="col-sm-2 control-label">是否免费：</label>
									<div class="col-sm-8" >
										<div class="radio-inline"><label><input type="radio" name="freeOrNo" value="true"   <#if purt.freeOrNo??&&purt.freeOrNo==true>checked=""</#if>> 是</label></div>
										<div class="radio-inline"><label><input type="radio" name="freeOrNo" value="false"  checked=""> 否</label></div>
									</div>
								</div>
								<div class="form-group" id="payAloneId">
									<label class="col-sm-2 control-label">是否单独购买：</label>
									<div class="col-sm-8" >
										<div class="radio-inline"><label><input type="radio" name="payAlone" value="true"  onclick="$(this).parents('.form-group').nextAll('.purchPrice').show();" checked=""> 是</label></div>
										<div class="radio-inline"><label><input type="radio" name="payAlone" value="false" <#if purt.payAlone??&&purt.payAlone==false>checked=""</#if> onclick="$(this).parents('.form-group').nextAll('.purchPrice').hide();" > 否</label></div>
									</div>
								</div>
								<div class="form-group purchPrice" style="display:none;">
									<label  class="col-sm-2 control-label">原价：</label>
									<div class="col-sm-8">
										<input type="text" name="oriPrice" 
										onkeyup="this.value=this.value.replace(/^\d^\./g,'')" onafterpaste="this.value=this.value.replace(/^\d^\./g,'')"
										<#if purt.oriPrice??> value="${purt.oriPrice}" </#if>  class="form-control1" placeholder="保留两位小数">
									</div>
								</div>
								<div class="form-group purchPrice" style="display:none;">
									<label class="col-sm-2 control-label">现价：</label>
									<div class="col-sm-8" >
										<input type="text" name="nowPrice" 
										onkeyup="this.value=this.value.replace(/^\d^\./g,'')" onafterpaste="this.value=this.value.replace(/^\d^\./g,'')"
										<#if purt.nowPrice??> value="${purt.nowPrice}" </#if>  class="form-control1" placeholder="保留两位小数">
									</div>
								</div>
								<div class="form-group">
							        <label class="col-sm-2 control-label">图片:</label>
							        <div class="col-sm-8">
								        <input type="file" name="file" onchange="image.setImagePreview(this,'imgFileId');">
								        <div id="imgdiv_initial"><img height="120px" src="${base}/file/preview.jspx?fileName=${(purt.imgPath)!}" id="imgFileId"/></div>
							        </div>
						      	</div>
								<div class="form-actions" style="margin:20px 0 0 0;">
                                       <button type="submit" class="btn btn-primary">提交</button>
                                       <button type="reset" class="btn">取消</button>
                                </div>
							</form>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOOTER -->
            <#include "../templateView/footer.html"/>
            <!-- / END OF FOOTER -->

        </div>
    </div>
	<script type="text/javascript">
	$(function() {
        window._queryOptions = {
	    		options : { 
	    			id : null,
		    		keyword : null,
		    		delOrNot : "no",
		    		token : "admin",
		    		page : {
		    			pageNo : 1,
		    			length : 10
		    		}
	    		},
	    		hash:(function(hash){try{return hash.substring(1)}catch(e){return null}})(location.hash),
	    		f : $('#footable-res2').clone(true),
	    		title : null,
	    		$foottable : $("#Filtering"),
	    		query : function() {
    				queryDownls();
    			}
	    	};
	    window._queryOptions.query();
	    var $payAlone = $('#payAloneId');
	    if($payAlone.find('input:eq(0)')[0].checked){
	    	$payAlone.nextAll('.purchPrice').show();
	    }
    });
    
	keywordSearch = function (obj){
			var text = $.trim($(obj).val());
			window._queryOptions.title = null;
			window._queryOptions.options.page.pageNo = 1;
			if("" != text){
				window._queryOptions.options.keyword = text;
				window._queryOptions.query();
			}else{
				$(obj).val("");
				window._queryOptions.options.keyword = null;
				window._queryOptions.query();
			}
	}

	queryDownls = function(){
			window._postDataJson({
	    		url : window._BasePath + "/governor/purchT/listAll.json",
	    		data : window._queryOptions.options,
	    		success : function(data){
	    			(function(w){w.options.page = data.data.page;
	    			w.options.delOrNot = "no";
	    			var purchList = data.data.list;
	    			tr_tdList(purchList);
	    			var $pag = $(".pagination");
	    			$pag.empty().append(createPageCount(w.options.page));
	    			window._anchor(w.hash);})(window._queryOptions);
	    		}
    		});	
	}    
	
	tr_tdList = function(d){
			if(d != undefined){
			(function(w){
				var $oldF = $('#footable-res2');
				$oldF.remove();
				var $newF = w.f.clone(true);
				w.$foottable.append($newF);
				var $tbody = $newF.find("tbody");
				for(var i = 0 ,length = d.length; i < length; i ++){
					var $tr = $("<tr></tr>");
					var $td0 = $("<td>"+d[i].type+"</td>");
					var $td1 = $("<td>"+d[i].name+"</a></td>");
					var $td2 = $("<td>"+d[i].sno+"</td>");
					var $td5 = $("<td>"+d[i].state+"</td>");
					var $td6 = $("<td></td>");
					var $span1 = $('<span class="status-metro status-active"><a href="'+window._BasePath+'/governor/purchT/edit.do?id='+d[i].id+'#editValidation">编辑</a></span>');
					var $span2 = $("<span class='status-metro status-suspended'>删除</span>")
									.attr({"onclick":"window._queryOptions.options.delOrNot='yes';window._queryOptions.options.id='"+d[i].id+"';window._queryOptions.query();"});
					$td6.append($span1).append($span2);
					$tr.append($td0).append($td1).append($td2).append($td5).append($td6);
					$tbody.append($tr);
				}
				$newF.footable();
				})(window._queryOptions);
			}
	}
	
	</script>    

    <script type="text/javascript">
   
    
    
    </script>

</body>

</html>
